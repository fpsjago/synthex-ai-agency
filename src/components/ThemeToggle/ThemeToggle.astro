---
---

<button
  class="theme-toggle"
  id="theme-toggle"
  aria-label="Toggle color theme"
  title="Toggle dark/light mode"
>
  <span class="theme-toggle-icon theme-toggle-icon--dark" aria-hidden="true">
    <!-- Moon -->
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
      <path d="M15.5 11.5A7 7 0 1 1 6.5 2.5 5.5 5.5 0 0 0 15.5 11.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </span>
  <span class="theme-toggle-icon theme-toggle-icon--light" aria-hidden="true">
    <!-- Sun -->
    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
      <circle cx="9" cy="9" r="3.5" stroke="currentColor" stroke-width="1.5"/>
      <path d="M9 1v2M9 15v2M1 9h2M15 9h2M3.22 3.22l1.42 1.42M13.36 13.36l1.42 1.42M13.36 4.64l-1.42 1.42M4.64 13.36l-1.42 1.42" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  </span>
</button>

<style>
  .theme-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: var(--radius-full);
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: background-color var(--transition-fast), border-color var(--transition-fast), color var(--transition-fast);
    position: relative;
    overflow: hidden;
  }

  .theme-toggle:hover {
    background: var(--color-surface-hover);
    border-color: var(--color-border-strong);
    color: var(--color-text-primary);
  }

  .theme-toggle-icon {
    position: absolute;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity var(--transition-base), transform var(--transition-base);
  }

  /* Dark theme = show moon */
  [data-theme="dark"] .theme-toggle-icon--dark {
    opacity: 1;
    transform: rotate(0deg) scale(1);
  }

  [data-theme="dark"] .theme-toggle-icon--light {
    opacity: 0;
    transform: rotate(90deg) scale(0.5);
  }

  /* Light theme = show sun */
  [data-theme="light"] .theme-toggle-icon--dark {
    opacity: 0;
    transform: rotate(-90deg) scale(0.5);
  }

  [data-theme="light"] .theme-toggle-icon--light {
    opacity: 1;
    transform: rotate(0deg) scale(1);
  }
</style>

<script>
  function initThemeToggle() {
    const toggle = document.getElementById('theme-toggle');
    if (!toggle) return;

    toggle.addEventListener('click', () => {
      const html = document.documentElement;
      const current = html.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      html.setAttribute('data-theme', next);
      localStorage.setItem('synthex-theme', next);
    });
  }

  initThemeToggle();
  document.addEventListener('astro:after-swap', initThemeToggle);
</script>
